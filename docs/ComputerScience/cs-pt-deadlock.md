---
layout: default
title: 교착상태(Deadlock)
parent: 프로세스와 쓰레드
grand_parent: 컴퓨터공학(Computer Science)
nav_order: 8
---

{: .no_toc }
<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
- TOC
{:toc}
</details>

---
# 교착상태(deadlock)
둘 이상의 쓰레드가 각기 다른 쓰래드가 점유하고 있는 자원을 서로 기다릴때,
무한 대기에 빠지는 상황을 교착상태 라고 말합니다.

교착상태가 발생하는 조건은 상호 배제(mutual exclusion),
점유대기(hold-and-wait), 비선점(no preemption), 순환대기(circular wait)입니다.

이 4가지 조건이 동시에 성립할 때 발생할 수 있습니다.

교착상태 문제를 해결한느 방법에는 무시, 예방, 회피, 탐지-회복의 4가지 방법이 있습니다.

### 교착상태(deadlock) 발생 조건
1. 상호 배제(mutual exclusion)
- 동시에 한 쓰래드만 자원을 점유할 수 있는 상황
- 다른 쓰래드가 자원을 사용하려면 자원이 방출될 때 까지 기다려야합니다.

2. 점유 대기(hold-and-wait)
- 쓰래드가 자원을 보유한 상태에서 다른 쓰래드가 보유한 자원을 추가로 기다리는 상황

3. 비선점(no preemption)
- 다른 쓰래드가 사용중인 자원을 강제로 선점할 수 없는 상황
- 자원을 점유하고 있는 쓰래드에 의해서만 자원이 방출됩니다.

4. 순환 대기(circular wait)
- 대기 중인 쓰래드들이 순환 형태로 자원을 대기하고 있는 상황

### 교착상태(deadlock) 해결 방법
1. 무시  
   교착상태 발생 확률이 낮은 시스템에서 아무런 조치를 취하지 않는다.
- 시스템 성능 저하 없음
- 현대 시스템에서 교착상태가 잘 발생하지 않고 해결 비용이 크기 때문에 무시 방법이 많이 사용된다.

2. 예방  
   교착 상태의 4가지 발생 조건중 하나가 성립하지 않게 하는 방법
- 순환 대기 조건이 성립하지 않도록 하는 것이 현실적으로 가능한 예방 기법
- 자원 사용의 효율성이 떨어지고 비용이 크다.

3. 회피  
   쓰래드가 앞으로 자원을 어떻게 요청할지에 대한 정보를 통해 순환대기 상태가
   발생하지 않도록 자원을 할당하는 방법
- 자원 할당 그래프 알고리즘, 은행원 알고리즘 등을 사용하여 자원을 할당하여 교착상태를 회피합니다.

4. 탐지-회복  
   시스템 검사를 통해 교착상태 발생을 탐지하고, 이를 회복시키는 방법
- 자원 사용의 효율성이 떨어지고 비용이 큽니다.
